---
wts:
  title: 16 – リソースのタグ付けを実装する (5 分)
  module: 'Module 05: Describe identity, governance, privacy, and compliance features'
ms.openlocfilehash: cc7a298eb03be3dfcbcc1c69cfa7409bc94c0640
ms.sourcegitcommit: dfe52fea15c568547ba630e9b337ec8df957ad80
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/25/2022
ms.locfileid: "139213867"
---
# <a name="16---implement-resource-tagging-5-min"></a>16 – リソースのタグ付けを実装する (5 分)

このチュートリアルでは、タグ付けが必要なポリシー割り当てを作成し、ストレージ アカウントを作成してタグ付けをテストし、指定したタグを持つリソースを表示し、タグ付けポリシーを削除します。

# <a name="task-1-create-a-policy-assignment"></a>タスク 1:ポリシー割り当てを作成する 

このタスクでは、**[リソースでタグを必須にする]** ポリシーを構成して、そのポリシーをサブスクリプションに割り当てます。 

1. [Azure portal](https://portal.azure.com) にサインインします。

2. **[すべてのサービス]** ブレードで、「**ポリシー**」を検索して選択します。

3. **[作成]** セクションにスクロールして **[割り当て]** をクリックし、ページの上部から **[ポリシーの割り当て]** をクリックします。

4. ポリシーの **範囲** はサブスクリプション全体になります。 

5. **[基本]** で、**[ポリシー定義]** 省略記号ボタン (テキストボックスの右側にあります) を選択します。 **[検索]** ボックスに、「**tag**」と入力します。 **"tag"** という文字が含まれる関連ポリシーの一覧が表示されます。 **[タグとその値がリソースに必要]** 定義までスクロールしてクリックし、 **[選択]** をクリックします。

   ![image](https://user-images.githubusercontent.com/89808319/155607579-d564a43e-a9cd-443d-8482-f47879eff2e9.png)
   
6.  **[パラメーター]** タブで、キーと値のペア名に「Company : Contoso」と入力します。 **[確認と作成]** をクリックし、**[作成]** をクリックします。

  

7. **[Require a tag amd its value on resources]\(リソースにタグとその値が必要\)** ポリシーの割り当てが適用されました。 リソースを作成する場合は、キーが "Company : Contoso" であるタグを含める必要があります。
   **注: ポリシーが適用されるまで最大 30 分待つ必要があります。** 

  ![image](https://user-images.githubusercontent.com/89808319/155607357-556646b6-9ca7-4817-a02e-643869b2c4dd.png)

# <a name="task-2-create-a-storage-account-to-test-the-required-tagging"></a>タスク 2:ストレージアカウントを作成して、必要なタグ付けをテストする

このタスクでは、ストレージ アカウントを作成して、必要なタグ付けをテストします。 

1. Azure portal の **[すべてのサービス]** ブレードで、「**ストレージ アカウント**」を検索して選択し、**[+ 追加]、[+ 新規]、[+ 作成]** のいずれかをクリックします。

2. **[ストレージ アカウントの作成]** ブレードの **[基本]** タブで次の情報を入力します (ストレージ アカウントの名前の **xxxx** は、名前がグローバルに一意になるように文字と数字に置き換えます)。 その他は既定値のままにします。

    | 設定 | 値 | 
    | --- | --- |
    | サブスクリプション | **提供される既定値を使用する** |
    | Resource group | **新しいリソース グループの作成** |
    | ストレージ アカウント名 | **storageaccountxxxx** |
    | 場所 | **(米国) 米国東部** |

3. **[Review + create](レビュー + 作成)** をクリックします。 

    **注:**  タグが提供されない場合に何が起こるかをテストします。 ポリシーが有効になるまで、最大で 30 分かかる可能性があることに注意してください。

4. 次の確認失敗メッセージが表示されます。 **[ここをクリックして詳細を表示する]** メッセージをクリックします。 **[エラー]** ブレードの **[概要]** タブで、ポリシーによってリソースが許可されていないことを伝えるエラー メッセージに注意します。

    **注:** [未処理エラー] タブを表示すると、必要な特定のタグ名が表示されます。 

    ![ポリシー エラーのために許可されていない所を示すスクリーンショット。](../images/1704.png)


5. **[エラー]** ペインを閉じて、**[前へ]** (画面の下部) をクリックします。 タグ付け情報を入力します。 

    | 設定 | 値 | 
    | --- | --- |
    | タグ名 | **Company:Contoso** (ドロップダウン リストにない可能性があります) |

6. **[確認と作成]** をクリックし、検証が完了したことを確認します。 **[作成]** をクリックして、ストレージ アカウントをデプロイします。 

# <a name="task-3-view-all-resources-with-a-specific-tag"></a>タスク 3:特定のタグを持つすべてのリソースを表示します

1. Azure Portal の **[すべてのサービス]** ブレードで、「**タグ**」を検索して選択します。

2. すべてのタグとその値を書き留めます。 **[Company : Contoso]** というキー/値のペアをクリックします。 これにより、デプロイにおいてタグが含まれていれば、新しく作成したストレージ アカウントを示すブレードが表示されます。 

   ![Company と Contoso が選択されたタグのスクリーンショット。](../images/1705.png)

3. ポータルで、**[すべてのリソース]** ブレードを表示します。

4. **[フィルターの追加]** をクリックし、フィルターのカテゴリとして **Company** タグ キーを追加します。 フィルターが適用されると、自分のストレージ アカウントのみがリストされます。

    ![[Company] が選択されている [すべてのリソース] フィルターのスクリーンショット。](../images/1706.png)

# <a name="task-4-delete-the-policy-assignment"></a>タスク 4:ポリシーの割り当てを削除する

このタスクでは、**[リソースでタグを必須にする]** ポリシーを削除して、今後の作業に影響が及ばないようにします。 

1. ポータルの **[すべてのサービス]** ブレードで、「**ポリシー**」を検索して選択します。

2. **[リソースでタグを必須にする]** ポリシー エントリをクリックします。

3. 上部のメニューから **[割り当ての削除]** をクリックします。

4. **[はい]** をクリックして、**[割り当ての削除]** ダイアログでポリシー割り当ての削除を確定します

5. 時間があれば、タグなしで別のリソースを作成し、ポリシーが適用されていないことを確認してください。

おめでとうございます。 このチュートリアルでは、タグ付けが必要なポリシー割り当てを作成し、リソース (ストレージ アカウント) を作成して、タグ付けのポリシーをテストし、指定されたタグでリソースを表示し、タグ付けポリシーを削除しました。


**注**:追加コストを回避するには、オプションでこのリソース グループを削除します。 リソース グループを検索し、リソース グループをクリックして、**[リソース グループの削除]** をクリックします。 リソース グループの名前を確認し、**[削除]** をクリックします。 **通知** を監視して、削除の進行状況を確認します。
