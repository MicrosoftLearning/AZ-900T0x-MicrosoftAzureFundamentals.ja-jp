---
wts:
  title: 06 - SQL Database を作成する (5 分)
  module: Module 02 - Core Azure Services (Workloads)
ms.openlocfilehash: 61a0e7c7b54ed7cd13a9eae427a5b41abc51cffe
ms.sourcegitcommit: 26c283fffdd08057fdce65fa29de218fff21c7d0
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/27/2022
ms.locfileid: "137908618"
---
# <a name="06---create-a-sql-database-5-min"></a>06 - SQL Database を作成する (5 分)

このチュートリアルでは、Azure で SQL Database を作成し、そのデータベース内のデータをクエリします。

# <a name="task-1-create-the-database"></a>タスク 1:データベースを作成する 

このタスクでは、AdventureWorksLT サンプル データベースに基づいて、SQL データベースを作成します。 

1. [ **https://portal.azure.com**](https://portal.azure.com) で Azure portal にサインインします。

2. **[すべてのサービス]** ブレードで「**SQL データベース**」を検索して選択し、**[+ 追加]、[+ 作成]、[+ 新規]** のいずれかをクリックします。 

3. **[基本]** タブで、この情報を入力します。  

    | 設定 | 値 | 
    | --- | --- |
    | サブスクリプション | **提供された既定値を使用する** |
    | Resource group | **新しいリソース グループの作成** |
    | データベース名| **db1** | 
    | サーバー | **[新規作成]** を選択する (右側に新しいサイドバーが開きます)|
    | サーバー名 | **sqlserverxxxx** (一意である必要があります) | 
    | 場所 | **(米国) 米国東部** |
    | 認証方法 | **SQL 認証を使用する** |
    | サーバー管理者のログイン | **sqluser** |
    | Password | **Pa$$w0rd1234** |
    | Click  | **[OK]** |

   ![[サーバー] ペインと [新しいサーバー] ペインのスクリーンショット。表に従ってフィールドが入力され、[レビュー + 作成] と [OK] ボタンが強調表示されています。](../images/0501.png)

4. **[ネットワーク]** タブで、次の設定を構成します (その他は既定値のままにしておきます)。 

    | 設定 | 値 | 
    | --- | --- |
    | 接続方法 | **パブリック エンドポイント** |    
    | Azure のサービスとリソースにこのサーバーへのアクセスを許可する | **はい** |
    | 現在のクライアント IP アドレスを追加する | **いいえ** |
    
   ![[SQL Database の作成] ブレードの [ネットワーク] タブのスクリーンショット。テーブルに従って設定が選択され、[確認と作成] ボタンが強調表示されています。](../images/0501b.png)

5. **[セキュリティ]** タブで。 

    | 設定 | 値 | 
    | --- | --- |
    | Microsoft Defender for SQL| **後で** |
    
6. **[追加設定]** タブに移動します。AdventureWorksLT サンプル データベースを使用します。

    | 設定 | 値 | 
    | --- | --- |
    | 既存のデータを使用します | **サンプル** |

    ![[SQL Database の作成] ブレードの [追加設定] タブのスクリーンショット。テーブルに従って設定が選択され、[確認と作成] ボタンが強調表示されています。](../images/0501c.png)

7. **[確認と作成]** をクリックしてから **[作成]** をクリックして、リソース グループ、サーバー、データベースをデプロイおよびプロビジョニングします。 デプロイには約 2 分から 5 分かかることがあります。


# <a name="task-2-test-the-database"></a>タスク 2:データベースをテストする。

このタスクでは、SQL サーバーを構成し、SQL クエリを実行します。 

1. デプロイが完了したら、デプロイ ブレードで [リソースに移動] をクリックします。 **[すべてのリソース]** ブレードで、「**データベース**」を検索して選択し、**[SQL データベース]** を選択し、新しいデータベースが作成されたことを確認します。 場合によっては、ページを **更新する** 必要があります。

    ![先ほどデプロイされた SQL データベースとサーバーのスクリーンショット。](../images/0502.png)

2. 作成した SQL データベースを表す **db1** エントリをクリックします。 db1 ブレードで、**クエリ エディター (プレビュー)** をクリックします。

3. パスワード **Pa$$w0rd1234** を使用して、**sqluser** としてログインします。

4. ログインすることはできません。 エラーをよく読み、ファイアウォール経由で許可する必要がある IP アドレスをメモしておきます。 

    ![IP アドレス エラーを示すクエリ エディターのログイン ページのスクリーンショット。](../images/0503.png)

5. **[db1]** ブレードに戻り、**[概要]** をクリックします。 

    ![SQL サーバー ページのスクリーンショット。](../images/0504.png)

6. db1 の **[概要]** ブレードから、概要画面の上部中央にある **[サーバー ファイアウォールの設定]** をクリックします。

7. **[+ クライアント IP の追加]** (トップ メニュー バー) をクリックし、エラーで参照されている IP アドレスを追加します。 (自動入力されている可能性があります - そうでない場合は、IP アドレス フィールドに貼り付けてください)。 **[保存]** をクリックし、必ず変更を保存します。 

    ![新しい IP 規則が強調表示されている、SQL サーバー ファイアウォールの設定ページのスクリーンショット。](../images/0506.png)

8. SQL データベースに戻り (下部のトグル バーを左にスライドします)、**[クエリ エディター (プレビュー)]** をクリックします。 パスワード **Pa$$w0rd1234** を使用して、**sqluser** として、もう一度ログインしてみます。 今度は成功するはずです。 新しいファイアウォール規則がデプロイされるまでに数分かかる場合があります。 

9. 正常にログインすると、クエリ ウィンドウが表示されます。 エディター ウィンドウに次のクエリを入力します。 

    ```SQL
    SELECT TOP 20 pc.Name as CategoryName, p.name as ProductName
    FROM SalesLT.ProductCategory pc
    JOIN SalesLT.Product p
    ON pc.productcategoryid = p.productcategoryid;
    ```

    ![クエリ ペインが示され、コマンドが正常に実行されている、クエリ エディターのスクリーンショット。](../images/0507.png)

10. **[実行]** をクリックしてから、**[結果]** ペインでクエリの結果を確認します。 クエリは正常に実行されるはずです。

    ![SQL コードが正常に実行され、[結果] ペインに出力が表示されている、データベースのクエリ エディター ペインのスクリーンショット。](../images/0508.png)

おめでとうございます。 Azure で SQL Database を作成し、そのデータベース内のデータを正常にクエリしました。

**注**:追加コストを回避するには、オプションでこのリソース グループを削除します。 リソース グループを検索し、リソース グループをクリックして、**[リソース グループの削除]** をクリックします。 リソース グループの名前を確認し、**[削除]** をクリックします。 **通知** を監視して、削除の進行状況を確認します。
