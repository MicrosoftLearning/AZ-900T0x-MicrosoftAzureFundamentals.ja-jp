---
wts:
  title: 15 - リソース ロックの管理 (5 分)
  module: 'Module 05: Describe identity, governance, privacy, and compliance features'
ms.openlocfilehash: 47c915f02f041a8af82057e95069b3cf9f73704c
ms.sourcegitcommit: 26c283fffdd08057fdce65fa29de218fff21c7d0
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/27/2022
ms.locfileid: "137908447"
---
# <a name="15---manage-resource-locks-5-min"></a>15 - リソース ロックの管理 (5 分)

このチュートリアルでは、リソース グループにロックをかけた後、リソース グループを削除できるかテストします。 サブスクリプションにおいては、リソース グループ、または個々のリソースにロックをかけることで、重要なリソースが誤って削除または変更されるのを防ぐことができます。  


# <a name="task-1--add-a-lock-to-the-resource-group-and-test-deletion"></a>タスク 1:リソース グループにロックを追加し、削除をテストする

このタスクでは、リソース グループにリソース ロックを追加し、リソース グループの削除をテストします。 

1. [Azure portal](https://portal.azure.com) にサインインします。

2. Azure portal で、**myRGLocks** リソース グループに移動します。

3. サブスクリプション、リソース グループ、または個々のリソースにロックを適用して、重要なリソースが誤って削除または変更されるのを防ぐことができます。 

4. **[設定]** セクションで、**[ロック]** をクリックし、**[+ 追加]** をクリックします。 

    ![[ロック] ウィンドウが表示されている myRGLocks リソース グループのスクリーンショット。](../images/1601.png)

5. 新しいロックを構成します。 完了したら、**[OK]** をクリックします。 

    | 設定 | 値 |
    | -- | -- |
    | ロック名 | '''RGLock''' |
    | ロックの種類 | **削除** |
    | | |

6. **[概要]** をクリックし、**[リソース グループの削除]** をクリックします。 リソース グループの名前を入力し、**[OK]** をクリックします。 リソース グループがロックされ、削除できないことを示すエラー メッセージが表示されます。

    ![削除ロックに失敗したスクリーンショット。](../images/1602.png)

# <a name="task-2-test-deleting-a-member-of-the-resource-group"></a>タスク 2:リソース グループのメンバーの削除をテストする

このタスクでは、リソース ロックがリソース グループのストレージ アカウントを保護するかどうかをテストします。 

1. **[すべてのサービス]** ブレードで「**ストレージ アカウント**」を検索して選択し、**[+ 追加]、[+ 作成]、[+ 新規]** のいずれかをクリックします。 

2. **[ストレージ アカウント]** ページの **[+追加]、[+作成]、[+新規]** のいずれかのブレードで、次の情報を入力します (ストレージ アカウントの名前の **xxxx** は、名前がグローバルに一意になるように文字と数字に置き換えます)。 その他は既定値のままにします。

    | 設定 | 値 | 
    | --- | --- |
    | サブスクリプション | **サブスクリプションを選択します** |
    | Resource group | **myRGLocks** |
    | ストレージ アカウント名 | **storageaccountxxxx** |
    | 場所 | **(米国) 米国東部**  |
    | パフォーマンス | **Standard** |
    | アカウントの種類 | **StorageV2 (汎用 v2)** |
    | レプリケーション | **ローカル冗長ストレージ (LRS)** |
    | アクセス層 (既定) | **ホット** |
   

3. **[確認と作成]** をクリックして、ストレージ アカウントの設定を確認し、Azure が構成を検証できるようにします。 

4. 検証できたら、**[作成]** をクリックします。 アカウントが正常に作成されたことを示す通知を待ちます。 

5.  ストレージ アカウントが正常に作成されたことを示す通知を待ちます。 

6. 新しいストレージ アカウントにアクセスし、**[概要]** ウィンドウで **[削除]** をクリックします。 リソースまたは親に削除ロックが設定されたことを示すエラー メッセージが表示されます。 

    ![ストレージ アカウントの削除中にエラーが発生した場合のスクリーンショット。](../images/1603.png)

    **注**:ストレージ アカウント専用のロックは作成しませんでしたが、ストレージ アカウントを含むリソース グループ レベルでロックを作成しました。 このように、この *親* レベルのロックによりリソースを削除できなくなり、ストレージ アカウントは親からロックを継承します。

# <a name="task-3-remove-the-resource-lock"></a>タスク 3:リソース ロックを解除する

このタスクでは、リソースロックを解除してテストします。 

1. **[myRGLocks-XXXXXXXX]** リソース グループ ブレードに戻り、**[設定]** セクションで **[ロック]** をクリックします。
    
2. **[myRGLocks-XXXXXXXX]** エントリの右端 (**[編集]** の右側) にある **[削除]** リンクをクリックします。

    ![[削除] リンクが強調表示されたロックのスクリーンショット。](../images/1604.png)

3. ストレージ アカウント ブレードに戻り、リソースを削除できるようになったことを確認します。

おめでとうございます! リソース グループを作成し、リソース グループにロックを追加して削除をテストし、リソース グループ内のリソースの削除をテストし、リソース ロックを削除しました。 

**注**:追加コストを回避するには、オプションでこのリソース グループを削除します。 リソース グループを検索し、リソース グループをクリックして、**[リソース グループの削除]** をクリックします。 リソース グループの名前を確認し、**[削除]** をクリックします。 **通知** を監視して、削除の進行状況を確認します。
